<template>
  <div class="page">

    <!-- ЁЯХТ Greeting + Weather -->
    <section class="greeting-bar fade-in">
      <div class="greeting-container">

        <div class="greeting-left">
          <h2 class="greeting-title">{{ greetingMessage }}</h2>
          <p class="time-text">{{ currentTime }}</p>
        </div>

        <div class="weather-section" v-if="weather">
          <img class="weather-icon" :src="weather.icon" />
          <div class="weather-details">
            <p class="weather-location">{{ weather.location }}</p>
            <p class="weather-temp">{{ weather.temp }}┬░C</p>
            <p class="weather-condition">{{ weather.condition }}</p>
          </div>
        </div>

      </div>
    </section>

    <!-- ЁЯМ╛ HERO SECTION (Beautiful Agri-Transport BG) -->
    <section class="hero-card fade-in-up">
      <div class="hero-bg"></div>

      <div class="overlay">
        <h1 class="hero-title">ЁЯМ╛ рдХреГрд╖реА рд╡рд╛рд╣рддреВрдХ рдкреНрд░рдгрд╛рд▓реА</h1>
        <p class="hero-tagline">{{ greetingTagline }}</p>

        <router-link to="/transport" class="cta-button">
          ЁЯЪЬ рд╡рд╛рд╣рддреВрдХ рдкреГрд╖реНрдард╛рдХрдбреЗ рдЬрд╛ тЖТ
        </router-link>
      </div>
    </section>

    <!-- ЁЯЪЫ Features -->
    <section class="features fade-in-up">
      <router-link to="/tmanage" class="feature-card-link">
        <div class="feature-card">
          <h3>ЁЯЪЫ рд╡рд╛рд╣рддреВрдХ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди</h3>
          <p>рд╢реЗрддрдХрд▒реНрдпрд╛рдВрд╕рд╛рдареА рд╡рд╛рд╣рддреВрдХ рдиреЛрдВрджреА рд╕рд╣рдЬ рдЬреЛрдбрд╛, рдкрд╣рд╛ рдЖрдгрд┐ рдлрд┐рд▓реНрдЯрд░ рдХрд░рд╛.</p>
        </div>
      </router-link>

      <div class="feature-card">
        <h3>ЁЯУК рдЕрд╣рд╡рд╛рд▓ рдЖрдгрд┐ рдорд╛рд╣рд┐рддреА</h3>
        <p>рджреИрдирдВрджрд┐рди, рд╕рд╛рдкреНрддрд╛рд╣рд┐рдХ рдЖрдгрд┐ рд╡рд╛рд░реНрд╖рд┐рдХ рд╡рд╛рд╣рддреВрдХ рдЕрд╣рд╡рд╛рд▓ рддрдпрд╛рд░ рдХрд░рд╛.</p>
      </div>

      <div class="feature-card">
        <h3>ЁЯТ╛ рд╕реБрд░рдХреНрд╖рд┐рдд рдбреЗрдЯрд╛</h3>
        <p>рдиреЛрдВрджреА рд╕реБрд░рдХреНрд╖рд┐рддрдкрдгреЗ рдЬрддрди рдХреЗрд▓реНрдпрд╛ рдЬрд╛рддрд╛рдд рдЖрдгрд┐ рдХрдзреАрд╣реА рдкрд╛рд╣рддрд╛ рдпреЗрддрд╛рдд.</p>
      </div>
    </section>

    <!-- About -->
    <section class="about fade-in-up">
      <h2>рдХреГрд╖реА рд╡рд╛рд╣рддреВрдХ рдкреНрд░рдгрд╛рд▓реА рдмрджреНрджрд▓</h2>
      <p>рд╣реА рдкреНрд░рдгрд╛рд▓реА рд╢реЗрддрдХрд░реА рдЖрдгрд┐ рд╡рд╛рд╣рддреВрдХ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХрд╛рдВрд╕рд╛рдареА рд▓реЙрдЬрд┐рд╕реНрдЯрд┐рдХ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рд╕реБрд▓рдн рдХрд░рддреЗ.</p>
    </section>

    <section class="external-link-card fade-in-up">
      <h2>ЁЯМР рдЖрдгрдЦреА рдПрдХреНрд╕рдкреНрд▓реЛрд░ рдХрд░рд╛</h2>
      <p>рдЖрдордЪрд╛ рд╕рдВрдмрдВрдзрд┐рдд рдкреНрд░рдХрд▓реНрдк <b>AgriHydrox</b> рджреЗрдЦреАрд▓ рдкрд╛рд╣реВ рд╢рдХрддрд╛.</p>
      <a
        href="https://tejasphapale.github.io/AgriHdrox/"
        target="_blank"
        class="visit-link"
      >
        ЁЯФЧ AgriHydrox рдкрд╣рд╛
      </a>
    </section>

  </div>
</template>

<script setup>
import { ref, onMounted } from "vue";

/* ===== TIME & WEATHER ===== */
const greetingMessage = ref("");
const greetingTagline = ref("");
const currentTime = ref("");
const weather = ref(null);

/* ===== GREETING ===== */
const updateGreeting = () => {
  const now = new Date();
  const hours = now.getHours();

  currentTime.value = now.toLocaleTimeString([], {
    hour: "2-digit",
    minute: "2-digit"
  });

  if (hours < 12) {
    greetingMessage.value = "ЁЯМЮ рд╢реБрдн рд╕рдХрд╛рд│!";
    greetingTagline.value = "рддрд╛рдЬреНрдпрд╛ рдкрд┐рдХрд╛рдВрдЪреНрдпрд╛ рд╡рд╛рд╣рддреБрдХреАрдЪреЗ рдирд┐рд░реАрдХреНрд╖рдг рд╕реБрд░реВ рдХрд░рд╛.";
  } else if (hours < 17) {
    greetingMessage.value = "тШАя╕П рд╢реБрдн рджреБрдкрд╛рд░!";
    greetingTagline.value = "рджреИрдирд┐рдХ рд╡рд╛рд╣рддреВрдХ рдкреНрд░рднрд╛рд╡реАрдкрдгреЗ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рдХрд░рд╛.";
  } else if (hours < 20) {
    greetingMessage.value = "ЁЯМЗ рд╢реБрдн рд╕рдВрдзреНрдпрд╛рдХрд╛рд│!";
    greetingTagline.value = "рдЖрдЬрдЪреНрдпрд╛ рд╡рд╛рд╣рддреВрдХ рдХреНрд░рд┐рдпрд╛рдХрд▓рд╛рдкрд╛рдВрдЪреЗ рдкреБрдирд░рд╛рд╡рд▓реЛрдХрди рдХрд░рд╛.";
  } else {
    greetingMessage.value = "ЁЯМЩ рд╢реБрдн рд░рд╛рддреНрд░реА!";
    greetingTagline.value = "рдЖрдЬрдЪреЗ рдЕрд╣рд╡рд╛рд▓ рдкрд╛рд╣рд╛.";
  }
};

/* ===== WEATHER API ===== */
const fetchWeather = async () => {
  try {
    const lat = 19.57;
    const lon = 74.21;

    const resp = await fetch(
      `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`
    );

    const data = await resp.json();
    if (!data.current_weather) return;

    const w = data.current_weather;

    const map = {
      0: "рд╕реНрд╡рдЪреНрдЫ рдЖрдХрд╛рд╢",
      1: "рдореБрдЦреНрдпрддрдГ рд╕реНрд╡рдЪреНрдЫ",
      2: "рдЕрд░реНрдзрд╕реЗ рдврдЧрд╛рд│",
      3: "рдкреВрд░реНрдг рдврдЧрд╛рд│",
      61: "рд╣рд▓рдХрд╛ рдкрд╛рдКрд╕",
      63: "рдкрд╛рдКрд╕",
      65: "рдЬреЛрд░рджрд╛рд░ рдкрд╛рдКрд╕",
    };

    weather.value = {
      location: "рд╕рд╛рдВрдЧрдордиреЗрд░",
      temp: w.temperature,
      condition: map[w.weathercode] || "рдврдЧрд╛рд│",
      icon: "https://cdn-icons-png.flaticon.com/512/414/414825.png",
    };
  } catch (err) {
    console.log(err);
  }
};

onMounted(() => {
  updateGreeting();
  setInterval(updateGreeting, 60000);
  fetchWeather();
});
</script>

<style scoped>
.page {
  font-family: 'Poppins', sans-serif;
  background: #f4fbe9;
  padding: 1rem 0.5rem;
}

/* ====================== GREETING BAR ====================== */
.greeting-bar {
  padding: 25px 20px;
}

.greeting-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.greeting-title {
  font-size: 26px;
  font-weight: 700;
  color: #1a1a1a;
}

.time-text {
  font-size: 15px;
  color: #555;
}

.weather-section {
  display: flex;
  align-items: center;
  gap: 12px;
}

.weather-icon {
  width: 48px;
  height: 48px;
}

/* ====================== HERO BG (PERFECT AGRI TRANSPORT) ====================== */
.hero-card {
  position: relative;
  height: 420px;
  border-radius: 14px;
  overflow: hidden;
  margin: 0 auto 3rem;
  max-width: 1200px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.25);
}

.hero-bg {
  background-image: url("src/assets/agri.jpg");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  image-rendering: auto;       /* ensures HD clarity */
  width: 100%;
  height: 100%;
}


.overlay {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.45);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  color: white;
}

.hero-title {
  font-size: 3rem;
  text-shadow: 2px 2px 10px black;
}

.hero-tagline {
  font-size: 1.3rem;
  margin-bottom: 20px;
}

.cta-button {
  padding: 1rem 2.5rem;
  background: linear-gradient(90deg, #43a047, #2e7d32);
  color: white;
  border-radius: 8px;
  text-decoration: none;
}

/* ====================== FEATURES GRID ====================== */
.features {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1rem;  /* increased spacing between cards */
  margin-bottom: 3rem; /* extra space below grid */
  padding: 0 1.5rem;   /* horizontal padding */
}

/* ====================== FEATURE CARDS ====================== */
.feature-card {
  background: white;
  padding: 2.5rem 2rem;      /* more padding for content */
  border-radius: 16px;       /* slightly more rounded */
  text-align: center;
  box-shadow: 0 8px 25px rgba(0,0,0,0.15); /* deeper shadow */
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.feature-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 12px 35px rgba(0,0,0,0.2); /* hover shadow */
}

/* ====================== ABOUT & EXTERNAL LINK CARDS ====================== */
.about,
.external-link-card {
  background: white;
  padding: 3.5rem 2.5rem;       /* slightly more spacious */
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.12); /* deeper subtle shadow */
  margin-bottom: 3.5rem;
  text-align: center;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.about:hover,
.external-link-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 14px 40px rgba(0,0,0,0.18); /* hover shadow */
}

/* ====================== VISIT LINK BUTTON ====================== */
.visit-link {
  display: inline-block;
  padding: 1rem 2.5rem;
  background: #2e7d32;
  color: white;
  border-radius: 10px;
  font-weight: 600;
  text-decoration: none;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.visit-link:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}

/* ====================== RESPONSIVE ADJUSTMENTS ====================== */
@media (max-width: 768px) {
  .features {
    grid-template-columns: 1fr; /* single column on mobile */
  }
  .hero-card {
    height: 350px;
  }
  .about,
  .external-link-card {
    padding: 2.5rem 1.5rem;
  }
}

</style>
